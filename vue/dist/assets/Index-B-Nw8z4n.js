import{v as I,E as b,d as k,x,q as r,k as s,t as o,f as i,e as c,w as d,b as g,O as S,o as u,P as C,K as z,L as E,p as V,j as A,Q as M,i as m,R as B,S as D}from"./index-CplolMp0.js";import{r as v}from"./request-IMNDnQFT.js";import{_ as L}from"./_plugin-vue_export-helper-DlAUqK2U.js";const N=I("Index",{state:()=>({house_num:null,total_price:null,single_price:null,view_num:null,house_list:[],page:0,city_area:[],city:null,select:null}),actions:{async get_houseInfo(){const e=(await v.get("/app/houseInfo/",{headers:{Authorization:localStorage.getItem("token")}})).data;e.code===200&&(this.house_num=e.data.house_num,this.total_price=e.data.mean_total_price,this.single_price=e.data.mean_single_price,this.view_num=e.data.view_num)},load(){this.page+=1,this.get_house_list()},async get_house_list(){const a={Authorization:localStorage.getItem("token")},e={};this.city!==null?(e.page=this.page,e.size=20,e.city=this.city):(e.page=this.page,e.size=20);const _=(await v.get("/app/houseList/",{params:e,headers:a})).data;if(_.code===200)for(let n in _.data)this.house_list.push(_.data[n]);else b.warning("数据到底了")},async get_areas(){const a={Authorization:localStorage.getItem("token")},l=(await v.get("app/area/",{headers:a})).data;if(l.code===200)for(let _ in l.data){const n={};n.value=l.data[_].city,n.label=l.data[_].city,this.city_area.push(n)}}},getters:{mean_total_price(a){return Math.round(a.total_price)},mean_sing_price(a){return Math.round(a.single_price)}}}),h=a=>(V("data-v-5b128896"),a=a(),A(),a),q={id:"index"},j={class:"statistics"},F={class:"statistics_item",style:{backgroundColor:"#ee4645"}},K=h(()=>s("div",{class:"title"},"房源数量",-1)),O={class:"content"},P={class:"statistics_item",style:{backgroundColor:"greenyellow"}},Q=h(()=>s("div",{class:"title"},"平均总价",-1)),R={class:"content"},T={class:"statistics_item",style:{backgroundColor:"#2AE3EE"}},U=h(()=>s("div",{class:"title"},"平均单价",-1)),$={class:"content"},G={class:"statistics_item",style:{backgroundColor:"#ac47ee"}},H=h(()=>s("div",{class:"title"},"关注人数",-1)),J={class:"content"},W={class:"houseInfo"},X={class:"house","infinite-scroll-distance":"1000","infinite-scroll-delay":"500"},Y=["src"],Z={class:"item_description"},ee={class:"item_title"},se={class:"item_address"},te={class:"item_info"},oe={class:"item_view"},ae={class:"item_price"},ie={class:"item_total_price"},ne={class:"item_single_price"},ce=k({__name:"Index",setup(a){const e=N();x(()=>{e.house_num===null&&(e.get_houseInfo(),e.get_areas())});const l=()=>{e.city=e.select[0],e.page=1,e.house_list.length=0,e.get_house_list()};return(_,n)=>{const f=g("el-cascader"),p=g("el-icon"),y=g("el-scrollbar"),w=S("infinite-scroll");return u(),r("div",q,[s("div",j,[s("div",F,[K,s("div",O,o(i(e).house_num)+"套",1)]),s("div",P,[Q,s("div",R,o(i(e).mean_total_price)+"万",1)]),s("div",T,[U,s("div",$,o(i(e).mean_sing_price)+"元/平方米",1)]),s("div",G,[H,s("div",J,o(i(e).view_num)+"人",1)]),c(f,{options:i(e).city_area,clearable:"",modelValue:i(e).select,"onUpdate:modelValue":n[0]||(n[0]=t=>i(e).select=t),onChange:l},null,8,["options","modelValue"])]),s("div",W,[c(y,{style:{height:"100%"}},{default:d(()=>[C((u(),r("div",X,[(u(!0),r(z,null,E(i(e).house_list,t=>(u(),r("div",{class:"house_item",key:t.id},[s("img",{src:`//images.weserv.nl/?url=${t.img}`,alt:"加载失败"},null,8,Y),s("div",Z,[s("span",ee,o(t.title),1),s("span",se,[c(p,{size:"14",color:"#394043"},{default:d(()=>[c(i(M))]),_:1}),m(" "+o(t.city)+" - "+o(t.area)+" - "+o(t.region),1)]),s("span",te,[c(p,null,{default:d(()=>[c(i(B))]),_:1}),m(" "+o(t.house_type)+" | "+o(t.house_size)+" | "+o(t.toward)+" | "+o(t.decoration)+" | "+o(t.floor)+" | "+o(t.year)+" | "+o(t.building_type),1)]),s("span",oe,[c(p,null,{default:d(()=>[c(i(D))]),_:1}),m(" "+o(t.view_num)+"人关注 | "+o(t.release_time),1)])]),s("div",ae,[s("span",ie,o(t.total_price)+"万",1),s("span",ne,o(t.single_price)+"元/m2",1)])]))),128))])),[[w,i(e).load]])]),_:1})])])}}}),de=L(ce,[["__scopeId","data-v-5b128896"]]);export{de as default};
